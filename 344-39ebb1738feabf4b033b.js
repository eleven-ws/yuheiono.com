"use strict";(self.webpackChunkyuheiono_com=self.webpackChunkyuheiono_com||[]).push([[344],{5344:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var i=n(9575),o=n(4041),r=function(){};var s="undefined"!=typeof window,c=s?window:null,a=function(e){return!!e.addEventListener},u=function(e){return!!e.on},l=function(e,t,n,i){void 0===n&&(n=c),(0,o.useEffect)((function(){if(t&&n)return a(n)?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(n,e,t,i):u(n)&&n.on(e,t,i),function(){a(n)?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(n,e,t,i):u(n)&&n.off(e,t,i)}}),[e,t,n,JSON.stringify(i)])},p=function(e,t,n,i){void 0===t&&(t=r),void 0===n&&(n={}),void 0===i&&(i=[e]);var s=n.event,c=void 0===s?"keydown":s,a=n.target,u=n.options,p=(0,o.useMemo)((function(){var n,i="function"==typeof(n=e)?n:"string"==typeof n?function(e){return e.key===n}:n?function(){return!0}:function(){return!1};return function(e){if(i(e))return t(e)}}),i);l(c,p,a,u)};const d="Left",h="Right",f="Up",v="Down",g={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},w={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},O="mousemove",m="mouseup",b="touchend",y="touchmove",S="touchstart";function j(e,t){if(0===t)return e;const n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}function E(e,t){const n=t=>{const n="touches"in t;n&&t.touches.length>1||e(((e,o)=>{o.trackMouse&&!n&&(document.addEventListener(O,i),document.addEventListener(m,r));const{clientX:s,clientY:c}=n?t.touches[0]:t,a=j([s,c],o.rotationAngle);return o.onTouchStartOrOnMouseDown&&o.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),w),{initial:a.slice(),xy:a,start:t.timeStamp||0})}))},i=t=>{e(((e,n)=>{const i="touches"in t;if(i&&t.touches.length>1)return e;if(t.timeStamp-e.start>n.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;const{clientX:o,clientY:r}=i?t.touches[0]:t,[s,c]=j([o,r],n.rotationAngle),a=s-e.xy[0],u=c-e.xy[1],l=Math.abs(a),p=Math.abs(u),w=(t.timeStamp||0)-e.start,O=Math.sqrt(l*l+p*p)/(w||1),m=[a/(w||1),u/(w||1)],b=function(e,t,n,i){return e>t?n>0?h:d:i>0?v:f}(l,p,a,u),y="number"==typeof n.delta?n.delta:n.delta[b.toLowerCase()]||g.delta;if(l<y&&p<y&&!e.swiping)return e;const S={absX:l,absY:p,deltaX:a,deltaY:u,dir:b,event:t,first:e.first,initial:e.initial,velocity:O,vxvy:m};S.first&&n.onSwipeStart&&n.onSwipeStart(S),n.onSwiping&&n.onSwiping(S);let E=!1;return(n.onSwiping||n.onSwiped||n[`onSwiped${b}`])&&(E=!0),E&&n.preventScrollOnSwipe&&n.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:S,swiping:!0})}))},o=t=>{e(((e,n)=>{let i;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<n.swipeDuration){i=Object.assign(Object.assign({},e.eventData),{event:t}),n.onSwiped&&n.onSwiped(i);const o=n[`onSwiped${i.dir}`];o&&o(i)}}else n.onTap&&n.onTap({event:t});return n.onTouchEndOrOnMouseUp&&n.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),w),{eventData:i})}))},r=e=>{document.removeEventListener(O,i),document.removeEventListener(m,r),o(e)},s=(e,t)=>{let r=()=>{};if(e&&e.addEventListener){const s=Object.assign(Object.assign({},g.touchEventOptions),t.touchEventOptions),c=[[S,n,s],[y,i,Object.assign(Object.assign({},s),t.preventScrollOnSwipe?{passive:!1}:{})],[b,o,s]];c.forEach((([t,n,i])=>e.addEventListener(t,n,i))),r=()=>c.forEach((([t,n])=>e.removeEventListener(t,n)))}return r},c={ref:t=>{null!==t&&e(((e,n)=>{if(e.el===t)return e;const i={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),i.cleanUpTouch=void 0),n.trackTouch&&t&&(i.cleanUpTouch=s(t,n)),Object.assign(Object.assign(Object.assign({},e),{el:t}),i)}))}};return t.trackMouse&&(c.onMouseDown=n),[c,s]}function T(e){const{trackMouse:t}=e,n=o.useRef(Object.assign({},w)),i=o.useRef(Object.assign({},g)),r=o.useRef(Object.assign({},i.current));let s;for(s in r.current=Object.assign({},i.current),i.current=Object.assign(Object.assign({},g),e),g)void 0===i.current[s]&&(i.current[s]=g[s]);const[c,a]=o.useMemo((()=>E((e=>n.current=e(n.current,i.current)),{trackMouse:t})),[t]);return n.current=function(e,t,n,i){return t.trackTouch&&e.el?e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:i(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:i(e.el,t)}):(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0}))}(n.current,i.current,r.current,a),c}var M=n(6193),L=n(1448),x=n(237),k=n(7437);var U=e=>{const t=e.images.edges,n=o.useRef(null),[r,s]=o.useState(),[c,a]=o.useState(Math.floor(Math.random()*t.length)),[u,l]=o.useState(0),d=o.useRef(!0),h=1e3,f=3500,v=e=>new Promise((t=>setTimeout(t,e))),g=()=>a((e=>(e+1)%t.length)),w=async()=>{d.current||(l(0),await v(h),d.current||(g(),l(1),await v(h),d.current||(await v(f),d.current||w())))},O=async e=>{let{isPrev:n=!1}=e;d.current||(d.current=!0,l(0),await v(h),n?a((e=>(e-1+t.length)%t.length)):g(),l(1),await v(500),d.current=!1,await v(500),d.current||d.current||(await v(f),d.current||w()))},m=async()=>await O({isPrev:!0}),b=async()=>await O({isPrev:!1});p("ArrowLeft",m),p("ArrowUp",m),p("ArrowRight",b),p("ArrowDown",b);const y=T({onSwipedRight:()=>m(),onSwipedLeft:()=>b()});o.useEffect((()=>{(async()=>{l(1),d.current=!1,w(),await v(4500)})()}),[]),o.useEffect((()=>{const e=()=>{s(document.documentElement.clientHeight)};return window.addEventListener("resize",e),window.addEventListener("load",e),e(),(()=>{const{width:e,height:i}=(0,M.c)(t[c].node),o=(r-160)*(e/i);n.current.style.width=o+"px"})(),()=>{window.removeEventListener("resize",e),window.removeEventListener("load",e)}}),[t,c,r]);const[,S]=t[c].node.relativePath.match(/^mainvisuals\/.+_(.+)\..+$/);return(0,k.Y)(L.A,{component:"section",sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:10,height:"calc(100vh - 160px)",height:"calc(100dvh - 160px)"}},(0,k.Y)(L.A,{ref:n,sx:{position:"relative",height:"100%",overflow:"hidden"}},(0,k.Y)(L.A,(0,i.A)({},y,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5,transitionProperty:"opacity",transitionTimingFunction:"ease-out",transitionDuration:"1000ms",opacity:u}}),(0,k.Y)(x.N,{href:`/works/${S}/`},(0,k.Y)(M.G,{image:(0,M.c)(t[c].node),alt:"YUHEI ONO",layout:"fullWidth",placeholder:"blurred",style:{pointerEvents:"none",userSelect:"none"}}))),(0,k.Y)(L.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1}},(0,k.Y)(M.G,{image:(0,M.c)(t[(c+1)%t.length].node),alt:"preload",layout:"fullWidth",style:{opacity:0,visibility:"hidden",pointerEvents:"none",userSelect:"none"}}))))}}}]);
//# sourceMappingURL=344-39ebb1738feabf4b033b.js.map