"use strict";(self.webpackChunkyuheiono_com=self.webpackChunkyuheiono_com||[]).push([[20],{4020:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var i=n(9575),o=n(4041),r=function(){};var s="undefined"!=typeof window,c=s?window:null,a=function(e){return!!e.addEventListener},u=function(e){return!!e.on},l=function(e,t,n,i){void 0===n&&(n=c),(0,o.useEffect)((function(){if(t&&n)return a(n)?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(n,e,t,i):u(n)&&n.on(e,t,i),function(){a(n)?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(n,e,t,i):u(n)&&n.off(e,t,i)}}),[e,t,n,JSON.stringify(i)])},p=function(e,t,n,i){void 0===t&&(t=r),void 0===n&&(n={}),void 0===i&&(i=[e]);var s=n.event,c=void 0===s?"keydown":s,a=n.target,u=n.options,p=(0,o.useMemo)((function(){var n,i="function"==typeof(n=e)?n:"string"==typeof n?function(e){return e.key===n}:n?function(){return!0}:function(){return!1};return function(e){if(i(e))return t(e)}}),i);l(c,p,a,u)};const d={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},h={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},f="mousemove",v="mouseup";function g(e,t){if(0===t)return e;const n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}function w(e,t){const n=t=>{const n="touches"in t;n&&t.touches.length>1||e(((e,o)=>{o.trackMouse&&!n&&(document.addEventListener(f,i),document.addEventListener(v,r));const{clientX:s,clientY:c}=n?t.touches[0]:t,a=g([s,c],o.rotationAngle);return o.onTouchStartOrOnMouseDown&&o.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),h),{initial:a.slice(),xy:a,start:t.timeStamp||0})}))},i=t=>{e(((e,n)=>{const i="touches"in t;if(i&&t.touches.length>1)return e;if(t.timeStamp-e.start>n.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;const{clientX:o,clientY:r}=i?t.touches[0]:t,[s,c]=g([o,r],n.rotationAngle),a=s-e.xy[0],u=c-e.xy[1],l=Math.abs(a),p=Math.abs(u),h=(t.timeStamp||0)-e.start,f=Math.sqrt(l*l+p*p)/(h||1),v=[a/(h||1),u/(h||1)],w=function(e,t,n,i){return e>t?n>0?"Right":"Left":i>0?"Down":"Up"}(l,p,a,u),O="number"==typeof n.delta?n.delta:n.delta[w.toLowerCase()]||d.delta;if(l<O&&p<O&&!e.swiping)return e;const m={absX:l,absY:p,deltaX:a,deltaY:u,dir:w,event:t,first:e.first,initial:e.initial,velocity:f,vxvy:v};m.first&&n.onSwipeStart&&n.onSwipeStart(m),n.onSwiping&&n.onSwiping(m);let b=!1;return(n.onSwiping||n.onSwiped||n[`onSwiped${w}`])&&(b=!0),b&&n.preventScrollOnSwipe&&n.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:m,swiping:!0})}))},o=t=>{e(((e,n)=>{let i;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<n.swipeDuration){i=Object.assign(Object.assign({},e.eventData),{event:t}),n.onSwiped&&n.onSwiped(i);const o=n[`onSwiped${i.dir}`];o&&o(i)}}else n.onTap&&n.onTap({event:t});return n.onTouchEndOrOnMouseUp&&n.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),h),{eventData:i})}))},r=e=>{document.removeEventListener(f,i),document.removeEventListener(v,r),o(e)},s=(e,t)=>{let r=()=>{};if(e&&e.addEventListener){const s=Object.assign(Object.assign({},d.touchEventOptions),t.touchEventOptions),c=[["touchstart",n,s],["touchmove",i,Object.assign(Object.assign({},s),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",o,s]];c.forEach((([t,n,i])=>e.addEventListener(t,n,i))),r=()=>c.forEach((([t,n])=>e.removeEventListener(t,n)))}return r},c={ref:t=>{null!==t&&e(((e,n)=>{if(e.el===t)return e;const i={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),i.cleanUpTouch=void 0),n.trackTouch&&t&&(i.cleanUpTouch=s(t,n)),Object.assign(Object.assign(Object.assign({},e),{el:t}),i)}))}};return t.trackMouse&&(c.onMouseDown=n),[c,s]}function O(e){const{trackMouse:t}=e,n=o.useRef(Object.assign({},h)),i=o.useRef(Object.assign({},d)),r=o.useRef(Object.assign({},i.current));let s;for(s in r.current=Object.assign({},i.current),i.current=Object.assign(Object.assign({},d),e),d)void 0===i.current[s]&&(i.current[s]=d[s]);const[c,a]=o.useMemo((()=>w((e=>n.current=e(n.current,i.current)),{trackMouse:t})),[t]);return n.current=function(e,t,n,i){return t.trackTouch&&e.el?e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:i(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:i(e.el,t)}):(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0}))}(n.current,i.current,r.current,a),c}var m=n(7820),b=n(2771),y=n(3530),S=n(5428);var j=e=>{const t=e.images.edges,n=o.useRef(null),[r,s]=o.useState(0),[c,a]=o.useState(Math.floor(Math.random()*t.length)),[u,l]=o.useState(0),d=o.useRef(!0),h=1e3,f=3500,v=e=>new Promise((t=>setTimeout(t,e))),g=()=>a((e=>(e+1)%t.length)),w=async()=>{d.current||(l(0),await v(h),d.current||(g(),l(1),await v(h),d.current||(await v(f),d.current||w())))},j=async e=>{let{isPrev:n=!1}=e;d.current||(d.current=!0,l(0),await v(h),n?a((e=>(e-1+t.length)%t.length)):g(),l(1),await v(500),d.current=!1,await v(500),d.current||d.current||(await v(f),d.current||w()))},E=async()=>await j({isPrev:!0}),T=async()=>await j({isPrev:!1});p("ArrowLeft",E),p("ArrowUp",E),p("ArrowRight",T),p("ArrowDown",T);const M=O({onSwipedRight:()=>E(),onSwipedLeft:()=>T()});o.useEffect((()=>{(async()=>{l(1),d.current=!1,w(),await v(4500)})()}),[]),o.useEffect((()=>{const e=()=>{s(document.documentElement.clientHeight)};return window.addEventListener("resize",e),window.addEventListener("load",e),e(),(()=>{const e=(0,m.c)(t[c].node);if(!e)return;const{width:i,height:o}=e,s=(r-160)*(i/o);n.current.style.width=s+"px"})(),()=>{window.removeEventListener("resize",e),window.removeEventListener("load",e)}}),[t,c,r]);const[,L]=t[c].node.relativePath.match(/^mainvisuals\/.+_(.+)\..+$/),k=(0,m.c)(t[c].node),x=(0,m.c)(t[(c+1)%t.length].node);return(0,S.Y)(b.A,{component:"section",sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:10,height:"calc(100vh - 160px)"}},(0,S.Y)(b.A,{ref:n,sx:{position:"relative",height:"100%",overflow:"hidden"}},(0,S.Y)(b.A,(0,i.A)({},M,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:5,transitionProperty:"opacity",transitionTimingFunction:"ease-out",transitionDuration:"1000ms",opacity:u}}),(0,S.Y)(y.N,{href:`/works/${L}/`},k&&(0,S.Y)(m.G,{image:k,alt:"YUHEI ONO",style:{pointerEvents:"none",userSelect:"none"}}))),(0,S.Y)(b.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1}},x&&(0,S.Y)(m.G,{image:x,alt:"preload",style:{opacity:0,visibility:"hidden",pointerEvents:"none",userSelect:"none"}}))))}}}]);
//# sourceMappingURL=20-e54c2670769e39af8bc0.js.map